"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1527],{1527:(T,d,a)=>{a.r(d),a.d(d,{RegistroPageModule:()=>M});var m=a(9808),l=a(4182),n=a(8962),u=a(2589),c=a(655),e=a(6435),p=a(5739),h=a(3602),f=a(2041),v=a(1343);const Z=[{path:"",component:(()=>{class t{constructor(i,o,r,s,P){this.authSvc=i,this.router=o,this.interactionSvc=r,this.firestorageSvc=s,this.firestoreSvc=P,this.newImage="",this.datos={uid:null,idLocal:null,nickname:null,correo:null,password:null,fotoDePerfil:null,categoria:"usuario"}}ngOnInit(){}registrar(){return(0,c.mG)(this,void 0,void 0,function*(){this.interactionSvc.presentLoading();const i=yield this.authSvc.registrarUser(this.datos).catch(o=>{this.interactionSvc.loading.dismiss(),this.interactionSvc.presentToast("Registro incorrecto. Compruebe sus datos",2e3),console.log("error")});if(i){const o="Usuarios",r=i.user.uid;if(this.datos.uid=r,this.datos.password=null,void 0!==this.newFile){const s=yield this.firestorageSvc.uploadImage(this.newFile,o,r);this.datos.fotoDePerfil=s}yield this.firestoreSvc.createDocument(this.datos,o,r),this.interactionSvc.loading.dismiss(),this.interactionSvc.presentToast("Registrado con exito!!",3e3),this.router.navigate(["/verify-email"])}})}newImageUpload(i){return(0,c.mG)(this,void 0,void 0,function*(){if(i.target.files&&i.target.files[0]){this.newFile=i.target.files[0];const o=new FileReader;o.onload=r=>{this.newImage=r.target.result},o.readAsDataURL(i.target.files[0])}})}redirectUser(i){this.router.navigate(i?["admin"]:["verify-email"])}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(p.e),e.Y36(u.F0),e.Y36(h.k),e.Y36(f.X),e.Y36(v.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registro"]],decls:45,vars:5,consts:[["slot","start","button","","size","large","name","arrow-back-outline","routerLink","/home"],[3,"ngSubmit"],["registroForm","ngForm"],["lines","full",1,"itemInput"],["position","floating"],["name","email","required","","appEmailDirective","",3,"ngModel","ngModelChange"],["emailModel","ngModel"],["type","password","required","","name","password",3,"ngModel","ngModelChange"],["type","text","name","nickname",3,"ngModel","ngModelChange"],[1,"normal"],["slot","end"],["for","file-upload"],["slot","icon-only","name","images"],["id","file-upload","type","file","accept","image/*",2,"display","none",3,"change"],[1,"image",3,"src"],["type","submit","expand","block",3,"click"],["routerLink","/login"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Registro Usuario"),e.qZA(),e._UZ(4,"ion-icon",0),e.qZA()(),e.TgZ(5,"ion-content")(6,"ion-card")(7,"form",1,2),e.NdJ("ngSubmit",function(){return o.registrar}),e.TgZ(9,"ion-item",3)(10,"ion-label",4),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"ion-input",5,6),e.NdJ("ngModelChange",function(s){return o.datos.correo=s}),e.qZA()(),e.TgZ(14,"ion-item",3)(15,"ion-label",4),e._uU(16,"Password"),e.qZA(),e.TgZ(17,"ion-input",7),e.NdJ("ngModelChange",function(s){return o.datos.password=s}),e.qZA()(),e.TgZ(18,"ion-item",3)(19,"ion-label",4),e._uU(20,"Nickname"),e.qZA(),e.TgZ(21,"ion-input",8),e.NdJ("ngModelChange",function(s){return o.datos.nickname=s}),e.qZA()(),e.TgZ(22,"ion-item")(23,"ion-label",9),e._uU(24," Foto: "),e.qZA(),e.TgZ(25,"ion-buttons",10)(26,"ion-button")(27,"label",11),e._UZ(28,"ion-icon",12),e.qZA(),e.TgZ(29,"input",13),e.NdJ("change",function(s){return o.newImageUpload(s)}),e.qZA()()(),e.TgZ(30,"div")(31,"ion-label"),e._uU(32,"Previsualizacion"),e.qZA(),e._UZ(33,"img",14),e.qZA(),e._UZ(34,"img",14),e.qZA(),e.TgZ(35,"ion-row")(36,"ion-col")(37,"ion-button",15),e.NdJ("click",function(){return o.registrar()}),e._uU(38,"Registro"),e.qZA()()()()(),e.TgZ(39,"ion-grid")(40,"ion-row")(41,"ion-col")(42,"p")(43,"a",16),e._uU(44,"\xbfYa tienes una cuenta?"),e.qZA()()()()()()),2&i&&(e.xp6(12),e.Q6J("ngModel",o.datos.correo),e.xp6(5),e.Q6J("ngModel",o.datos.password),e.xp6(4),e.Q6J("ngModel",o.datos.nickname),e.xp6(12),e.Q6J("src",o.newImage,e.LSH),e.xp6(1),e.Q6J("src",o.datos.fotoDePerfil,e.LSH))},directives:[n.Gu,n.sr,n.wd,n.gu,n.YI,u.rH,n.W2,n.PM,l._Y,l.JL,l.F,n.Ie,n.Q$,n.pK,n.j9,l.Q7,l.JJ,l.On,n.Sm,n.YG,n.Nd,n.wI,n.jY,u.yS],styles:[".error[_ngcontent-%COMP%]{color:red;margin-top:2px}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Bz.forChild(Z)],u.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,l.u5,n.Pc,R,l.UX]]}),t})()}}]);