"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2681],{2681:(y,g,c)=>{c.r(g),c.d(g,{SetSeccionesPageModule:()=>T});var u=c(9808),l=c(4182),t=c(8962),S=c(2589),r=c(655),e=c(6435),h=c(1343),m=c(3963),f=c(3602),v=c(5739);function p(n,a){if(1&n){const o=e.EpF();e.TgZ(0,"div")(1,"ion-item")(2,"ion-buttons",7)(3,"ion-button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().enableNewSeccion=!1}),e._UZ(4,"ion-icon",9),e.qZA(),e.TgZ(5,"ion-button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().guardarSeccion()}),e._UZ(6,"ion-icon",10),e.qZA()()(),e.TgZ(7,"h3",5),e._uU(8,"Ingrese datos de la seccion"),e.qZA(),e.TgZ(9,"ion-item")(10,"ion-label",11),e._uU(11," Nombre: "),e.qZA(),e.TgZ(12,"ion-input",12),e.NdJ("ngModelChange",function(s){return e.CHM(o),e.oxw().newSeccion.nombre=s}),e.qZA()()()}if(2&n){const o=e.oxw();e.xp6(12),e.Q6J("ngModel",o.newSeccion.nombre)}}function Z(n,a){if(1&n&&(e.TgZ(0,"ion-item")(1,"ion-label",13),e._uU(2),e.qZA()()),2&n){const o=a.$implicit;e.xp6(2),e.hij(" ",o.nombre,"")}}const b=[{path:"",component:(()=>{class n{constructor(o,i,s,d,P,x,C){this.firestoreSvc=o,this.loadingController=i,this.toastController=s,this.alertController=d,this.pagesInfoSvc=P,this.interactionSvc=x,this.authSvc=C,this.secciones=[],this.localId=null,this.infoIUser=null,this.enableNewSeccion=!1}ngOnInit(){this.authSvc.stateUser().subscribe(o=>{this.getLocalId()}),this.getSecciones()}getLocalId(){return(0,r.mG)(this,void 0,void 0,function*(){const o=yield this.authSvc.getLocalId();o?(this.localId=o,console.log(this.localId),this.getInfoUser()):console.log("No existe localId")})}getInfoUser(){this.firestoreSvc.getDocument("Usuarios",this.localId).subscribe(s=>{s&&(this.infoIUser=s),console.log("los datos son ->",s)})}getSecciones(){this.firestoreSvc.getCollection("Seccion").subscribe(i=>{this.secciones=i})}guardarSeccion(){return(0,r.mG)(this,void 0,void 0,function*(){this.interactionSvc.presentLoading(),this.firestoreSvc.createDocument(this.newSeccion,"Seccion",this.newSeccion.id).then(i=>(0,r.mG)(this,void 0,void 0,function*(){this.interactionSvc.presentToast("guardado con exito",2e3),this.interactionSvc.loading.dismiss()})).catch(i=>{this.interactionSvc.presentToast("no se pudo guardar",2e3)})})}finishLoading(){return(0,r.mG)(this,void 0,void 0,function*(){this.loading=!1,yield this.loadingController.dismiss()})}nuevo(){this.enableNewSeccion=!0,this.newSeccion={id:this.firestoreSvc.createId(),nombre:""}}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(h.C),e.Y36(t.HT),e.Y36(t.yF),e.Y36(t.Br),e.Y36(m.A),e.Y36(f.k),e.Y36(v.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-set-secciones"]],decls:15,vars:2,consts:[["color","secondary"],["slot","start"],[2,"text-align","end","margin","10px"],["ngDefaultControl","","color","dark",1,"normal",3,"click"],[4,"ngIf"],[1,"subtitulo","encabezado"],[4,"ngFor","ngForOf"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],["color","primary","slot","icon-only","name","save-sharp"],["position","floating",1,"normal"],["type","text","inputmode","text",1,"normal",3,"ngModel","ngModelChange"],[1,"normal"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button"),e._UZ(4,"ion-menu-button"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Secciones"),e.qZA()()(),e.TgZ(7,"ion-content")(8,"div",2)(9,"ion-button",3),e.NdJ("click",function(){return i.nuevo()}),e._uU(10," nuevo"),e.qZA()(),e.YNc(11,p,13,1,"div",4),e.TgZ(12,"h3",5),e._uU(13,"Lista de Secciones"),e.qZA(),e.YNc(14,Z,3,1,"ion-item",6),e.qZA()),2&o&&(e.xp6(11),e.Q6J("ngIf",i.enableNewSeccion),e.xp6(3),e.Q6J("ngForOf",i.secciones))},directives:[t.Gu,t.sr,t.Sm,t.YG,t.fG,t.wd,t.W2,l.Fj,u.O5,t.Ie,t.gu,t.Q$,t.pK,t.j9,l.JJ,l.On,u.sg],styles:[""]}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[S.Bz.forChild(b)],S.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,l.u5,t.Pc,I]]}),n})()}}]);