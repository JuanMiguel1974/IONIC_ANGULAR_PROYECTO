"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9805],{9805:(y,d,l)=>{l.r(d),l.d(d,{PerfilPageModule:()=>T});var f=l(9808),h=l(4182),s=l(8962),g=l(2589),r=l(655),t=l(6435),m=l(5739),p=l(1343),v=l(3602),P=l(2041);function I(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-buttons",7)(4,"ion-button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().editAtributo("nickname")}),t._UZ(5,"ion-icon",9),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" Nickname: ",e.infoIUser.nickname," ")}}function Z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2," Foto perfil: "),t.qZA(),t.TgZ(3,"ion-buttons",7)(4,"ion-button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveFotoPerfil()}),t._UZ(5,"ion-icon",10)(6,"img",6),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("src",e.infoIUser.fotoDePerfil,t.LSH)}}const U=[{path:"",component:(()=>{class i{constructor(e,o,n,c,u){this.authSvc=e,this.firestoreSvc=o,this.alertController=n,this.interactionSvc=c,this.firestorageSvc=u,this.localId=null,this.uid=null,this.infoIUser=null,this.newImage=""}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){this.authSvc.stateUser().subscribe(e=>{this.getLocalId()})})}getLocalId(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.authSvc.getLocalId();e?(this.localId=e,console.log(this.localId),this.getInfoUser()):console.log("No existe localId")})}getInfoUser(){this.firestoreSvc.getDocument("Usuarios",this.localId).subscribe(n=>{n&&(this.infoIUser=n),console.log("los datos son ->",n)})}saveAtributo(e,o){return(0,r.mG)(this,void 0,void 0,function*(){yield this.interactionSvc.presentLoading();const c=this.localId,u={};u[e]=o,this.firestoreSvc.updateDocument("Usuarios",c,u).then(()=>{this.interactionSvc.presentToast("actualizado con exito",2e3),this.interactionSvc.loading.dismiss()})})}saveFotoPerfil(){return(0,r.mG)(this,void 0,void 0,function*(){void 0!==this.newFile&&(this.firestorageSvc.uploadImage(this.newFile,"Usuarios/",this.infoIUser.uid),this.interactionSvc.presentToast("guardado con exito",2e3),this.infoIUser.fotoDePerfil=this.newImage,this.newImage="")})}editAtributo(e){return(0,r.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Editar"+e,inputs:[{name:e,type:"text",placeholder:"Ingresa tu nuevo"+e}],buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Aceptar",handler:n=>{console.log("Confirm Ok",n),this.saveAtributo(e,n[e])}}]})).present()})}newImageUpload(e){return(0,r.mG)(this,void 0,void 0,function*(){if(e.target.files&&e.target.files[0]){this.newFile=e.target.files[0];const o=new FileReader;o.onload=n=>{this.newImage=n.target.result},o.readAsDataURL(e.target.files[0])}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.e),t.Y36(p.C),t.Y36(s.Br),t.Y36(v.k),t.Y36(P.X))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-perfil"]],decls:21,vars:3,consts:[["color","secondary"],["slot","start"],[4,"ngIf"],["id","file-upload","type","file","accept","image/*",2,"display","none",3,"change"],["for","file-upload"],["slot","icon-only","name","images"],[1,"image",3,"src"],["slot","end"],[3,"click"],["slot","end","name","create-outline"],["margin","10px","slot","end","name","create-outline"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button"),t._UZ(4,"ion-menu-button"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Mi perfil"),t.qZA()()(),t.TgZ(7,"ion-content")(8,"ion-list")(9,"ion-card"),t.YNc(10,I,6,1,"ion-item",2),t.qZA(),t.TgZ(11,"ion-card"),t.YNc(12,Z,7,1,"ion-item",2),t.TgZ(13,"input",3),t.NdJ("change",function(c){return o.newImageUpload(c)}),t.qZA(),t.TgZ(14,"ion-button")(15,"label",4),t._UZ(16,"ion-icon",5),t.qZA()(),t.TgZ(17,"div")(18,"ion-label"),t._uU(19,"Previsualizacion"),t.qZA(),t._UZ(20,"img",6),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("ngIf",o.infoIUser),t.xp6(2),t.Q6J("ngIf",o.infoIUser),t.xp6(8),t.Q6J("src",o.newImage,t.LSH))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.fG,s.wd,s.W2,s.q_,s.PM,f.O5,s.Ie,s.Q$,s.gu],styles:["img[_ngcontent-%COMP%]{width:100px}"]}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),i})(),T=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,h.u5,s.Pc,x]]}),i})()}}]);